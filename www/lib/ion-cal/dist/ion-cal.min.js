!function(){"use strict";function e(){var e={restrict:"E",scope:{options:"=?",events:"=?"},template:function(e,t){return"week"===t.calType?s:i},controller:t};return e}function t(e,t,n,o){function a(){for(var t=new Date,n=0;n<e.allWeeks.length;n++)for(var o=e.allWeeks[n],a=0;a<o.length;a++)if(o[a]&&o[a].date.getFullYear()===t.getFullYear()&&o[a].date.getMonth()===t.getMonth()&&o[a].date.getDate()===t.getDate())return void(e.activeSlide=n)}function i(t){e.selectedEvents=t.event;var n=e.selectedEvents.length>1?"these shifts":"this shift";return o.show({cssClass:"block-popup",template:'<ion-list><ion-item ng-repeat="shiftToCancel in selectedEvents"><img ng-src="img/companies/{{shiftToCancel.company.toLowerCase()}}.png" alt=""><p>{{shiftToCancel.company}} | Earnings Est: ${{shiftEarnings(shiftToCancel)}}</p><p>{{dividerFunction(shiftToCancel.startsAt)}}, {{formatAMPM(shiftToCancel.startsAt) | uppercase}} - {{formatAMPM(shiftToCancel.endsAt) | uppercase}}</p></ion-item><p ng-if="strikes(selectedEvents)">WARNING: You\'ll get {{strikes(selectedEvents)}} strike{{strikes(selectedEvents) > 1 ? "s" : ""}}</p></ion-list>',title:"Blocking this day will<br>cancel "+n,scope:e,buttons:[{text:"No, Leave it",type:"button-dark",onTap:function(e){return!1}},{text:"Yes, Block",type:"button-assertive",onTap:function(e){return!0}}]})}function s(t,n,o){if(t&&!t.disabled&&f(t.date)){if(t.event.length)return void i(t).then(function(n){if(n){t.blocked=!t.blocked,t.event=[];var a=l();e.options.blockClick(t,a,o)}});t.blocked=!t.blocked;var a=l();e.options.blockClick(t,a,o)}}function l(){for(var t=[],n=0;n<e.months.length;n++)for(var o=e.months[n],a=0;a<o.weeks.length;a++)for(var i=o.weeks[a],s=0;s<i.length;s++){var l=i[s];l&&l.blocked&&t.push({day:l.day,month:Number(l.month)+1,year:l.year})}return t}function r(t,n,o){t&&!t.disabled&&(e.options.defaultDate=t.date,d(t,o))}function d(t,n){t.event&&t.event.length?e.options.eventClick(t,n):e.options.dateClick(t,n)}function c(t){t&&e.events&&(t.event=[],e.events.forEach(function(e){u(t.date,e.date)&&t.event.push(e)}))}function u(e,t){var n=new Date(e).setHours(0,0,0,0),o=new Date(t).setHours(0,0,0,0);return n===o?!0:!1}function f(e){var t=new Date(e).setHours(0,0,0,0),n=(new Date).setHours(0,0,0,0);return t>n?!0:!1}function p(t){if(!e.options.minDate&&!e.options.maxDate)return!0;var n=t.date;return e.options.minDate&&n<e.options.minDate?!1:e.options.maxDate&&n>e.options.maxDate?!1:!0}function h(t){if(!e.options.disabledDates)return!1;for(var n=0;n<e.options.disabledDates.length;n++)if(t.year===e.options.disabledDates[n].getFullYear()&&t.month===e.options.disabledDates[n].getMonth()&&t.day===e.options.disabledDates[n].getDate())return!0}function v(t){if(!e.options.blockedDays)return!1;for(var n=0;n<e.options.blockedDays.length;n++){var o=e.options.blockedDays[n];if(t.day===o.day&&t._month===o.month&&t.year===o.year)return!0}return!1}function D(t,n){var o=null,a=null;return e.options.minDate?(t=t||A.indexOf(e.selectedMonth),n=n||e.selectedYear,0===t?(o=n-1,a=11):(o=n,a=t-1),o<e.options.minDate.getFullYear()?!1:o===e.options.minDate.getFullYear()&&a<e.options.minDate.getMonth()?!1:!0):!0}function g(t,n){var o=null,a=null;return void 0===t&&(t=A.indexOf(e.selectedMonth)),void 0===n&&(n=e.selectedYear),11===t?(o=n+1,a=0):(o=n,a=t+1),e.options.maxDate?o>e.options.maxDate.getFullYear()?!1:o===e.options.maxDate.getFullYear()&&a>e.options.maxDate.getMonth()?!1:m(a,o):m(a,o)}function m(e,t){return{month:e,year:t,weeks:k(e,t,[])}}function y(){e.months=[],e.allWeeks=[];for(var t=m(e.options.minDate.getMonth(),e.options.minDate.getFullYear());t;)e.months.push(t),e.allWeeks=e.allWeeks.concat(t.weeks),t=g(t.month,t.year)}function k(t,n,o){for(var a=null,i=new Date(n,t+1,0).getDate(),s=1;i+1>s;s+=1){var l=new Date(n,t,s),r=new Date(n,t,s).getDay();e.options.mondayIsFirstDay&&(r=(r+6)%7),a=a||[null,null,null,null,null,null,null],a[r]={year:n,month:t,day:s,date:l,_month:l.getMonth()+1},p(a[r])?e.events&&c(a[r]):a[r].disabled=!0,a[r]&&h(a[r])&&(a[r].disabled=!0),a[r]&&v(a[r])&&(a[r].blocked=!0),(6===r||s===i)&&(o.push(a),a=void 0)}return o}function b(e,t,n){}function w(){e.options.defaultDate?e.options._defaultDate=new Date(e.options.defaultDate):e.options._defaultDate=new Date,e.selectedYear=e.options._defaultDate.getFullYear(),e.selectedMonth=A[e.options._defaultDate.getMonth()],e.selectedDay=e.options._defaultDate.getDate()}function M(){if(e.options.disabledDates&&0!==e.options.disabledDates.length)for(var t=0;t<e.options.disabledDates.length;t++)e.options.disabledDates[t]=new Date(e.options.disabledDates[t])}function x(e){return F.map(function(t){return E(t).slice(0,e)})}function Y(t){if(t){var n=t.year===e.options._defaultDate.getFullYear()&&t.month===e.options._defaultDate.getMonth()&&t.day===e.options._defaultDate.getDate();return n}}function C(){for(var t=0;t<e.allWeeks.length;t++)for(var n=e.allWeeks[t],o=0;o<n.length;o++){var a=n[o];a&&c(a)}}e.days=[],e.options=e.options||{},e.events=e.events||[],e.options.disabledDates=e.options.disabledDates||[],e.options.dayNamesLength=e.options.dayNamesLength||1,e.options.mondayIsFirstDay=e.options.mondayIsFirstDay||!1,e.options.disableClickedDates?e.onClick=s:e.onClick=r,e.allowedPrevMonth=D,e.allowedNextMonth=g,e.weekDays=x,e.isDefaultDate=Y,e.arrowPrevClass="visible",e.arrowNextClass="visible";var E=t("translate"),A=["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],F=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"];if(e.options.mondayIsFirstDay){var T=F.shift();F.push(T)}e.options.minDate&&(e.options.minDate=new Date(e.options.minDate)),e.options.maxDate&&(e.options.maxDate=new Date(e.options.maxDate)),y(),a(),e.nextSlide=function(){n.next()},e.prevSlide=function(){n.previous()},e.$watch("options.defaultDate",function(){w()}),e.$watch("options.disabledDates",function(){e.options.disabledDates&&M()}),e.$watch("events",function(){C()}),e.$watch("weeks",function(t){var n=[];angular.forEach(t,function(e){angular.forEach(e,function(e){e&&e.event&&angular.forEach(e.event,function(e){n.push(e)})})}),"function"==typeof e.options.filteredEventsChange&&e.options.filteredEventsChange(n)}),e.$watch("selectedYear",function(e,t){e!==t&&b()}),e.$watch("selectedMonth",function(e,t){e!==t&&b()}),e.monthHasChanged=function(t){var n=e.months[t];e.selectedYear=n.year,e.selectedMonth=A[n.month];var o={name:e.selectedMonth,index:n.month+1,_index:n.month+2},a=l();e.options.changeMonth(o,e.selectedYear,a)},e.weekHasChanged=function(t){for(var n=e.allWeeks[t],o=0;o<n.length;o++){var a=n[o];if(a){if(e.selectedMonth===A[a.month])return;e.selectedYear=a.year,e.selectedMonth=A[a.month];var i={name:e.selectedMonth,index:a.month+1,_index:a.month+2};e.options.changeMonth(i,e.selectedYear)}}},e.dividerFunction=function(e){return moment(e).format("MMM dddd Do")},e.formatAMPM=function(e){return moment(e).format("ha")},e.shiftEarnings=function(e){return(e.endsAt.getTime()-e.startsAt.getTime())/36e5*15},e.strikes=function(e){for(var t=0,n=0;n<e.length;n++){var o=e[n],a=moment().add(72,"hours");a.isAfter(o.startsAt)&&t++}return t}}angular.module("ioncal",[]).directive("ionCal",e);var n='<div class="month"><div class="arrow {{arrowPrevClass}}" ng-click="prevSlide()"><i class="icon ion-chevron-left"></i></div><div class="label">{{selectedMonth | uppercase | translate}} {{selectedYear | uppercase}}</div><div class="arrow {{arrowNextClass}}" ng-click="nextSlide()"><i class="icon ion-chevron-right"></i></div></div>',o='<div class="week"><div class="day" ng-repeat="day in weekDays(options.dayNamesLength) track by $index">{{ day }}</div></div>',a='<div class="day"ng-repeat="day in week track by $index"ng-class="{selected: isDefaultDate(day), event: day.event[0], disabled: day.disabled, blocked: day.blocked, out: !day}"ng-click="onClick(day, $index, $event)"><div class="number">{{day.day}}</div></div>',i='<div class="ion-cal ion-month">'+n+o+'<ion-slide-box show-pager="false" on-slide-changed="monthHasChanged($index)"><ion-slide ng-repeat="curr in months"><div class="days" ng-repeat="week in curr.weeks">'+a+"</div></ion-slide></ion-slide-box></div>",s='<div class="ion-cal ion-week">'+o+'<ion-slide-box active-slide="activeSlide" show-pager="false" on-slide-changed="weekHasChanged($index)"><ion-slide class="days" ng-repeat="week in allWeeks">'+a+"</ion-slide></ion-slide-box></div>";t.$inject=["$scope","$filter","$ionicSlideBoxDelegate","$ionicPopup"]}();